var VideoPlayList=VideoPlayList||{};VideoPlayList.API={videoPlaylistTemplate:$("#VideoPlaylistTemplate"),videos:[],getVideoListing:function(n){$("#VideoPlaylistComponent").addClass("loading");var t="",i=parseInt($("#VideoListing-PageNumber-"+n).val());$("#VideoListing-PageToken-"+n).val()!=null&&$("#VideoListing-PageToken-"+n).val()!=""&&(t=$("#VideoListing-PageToken-"+n).val());$.ajax({url:"/api/GetPlaylistVideos",method:"GET",data:{dataSourceId:n,pageNumber:i,pageSize:parseInt($("#VideoListing-PageSize-"+n).val()),pageToken:t,culture:$("html").attr("lang")},success:function(t){if(t&&t.Success){if(t.Videos.length>0){var r=VideoPlayList.API.videoPlaylistTemplate.html(),u=Mustache.to_html(r,t.Videos);this.videoPlaylistContainer=$("#VideoPlaylistContainer-"+n);this.videoPlaylistContainer.append(u);t.hasNextPage?($("#VideoListing-PageNumber-"+n).val(i+1),t.NextPageToken!=null&&t.NextPageToken!=""&&$("#VideoListing-PageToken-"+n).val(t.NextPageToken),$("#loadMoreContainer-"+n).show()):$("#loadMoreContainer-"+n).hide()}else this.videoPlaylistContainer.hide(),this.videoPlaylistContainer.html(""),$("#loadMoreContainer-"+n).hide();$("#VideoPlaylistComponent").removeClass("loading")}},error:function(){console.log("error in video playlist listing Component js");VideoPlayList.API.noResultFound(n);$("#VideoPlaylistComponent").removeClass("loading")}})},noResultFound:function(n){this.videoPlaylistContainer=$("#VideoPlaylistContainer-"+n);this.videoPlaylistContainer.hide();this.videoPlaylistContainer.html("");$("#loadMoreContainer-"+n).hide()},loadMoreClickEvent:function(n){$(document).on("click","#loadmore-"+n,function(){VideoPlayList.API.getVideoListing(n)})},init:function(n){this.loadMoreClickEvent(n);this.getVideoListing(n)}};$(document).ready(function(){$(".tab.tab-content").find(".container.nested-container").length>0&&$(".tab.tab-content").find(".container.nested-container").each(function(){var n=$(this).data("datsourceid");VideoPlayList.API.init(n)})});