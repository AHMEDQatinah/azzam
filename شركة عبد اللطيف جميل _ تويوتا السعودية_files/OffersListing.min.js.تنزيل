var offerListing=offerListing||{};offerListing.API={offers:[],OffersContainerId:"",OfferTemplateId:"offerTemplate",getOffersItems:function(n){$("#offersListingContainer").addClass("loading");$.ajax({url:"/api/Offers/GetMoreOffers",method:"GET",data:{dataSourceId:$("#sourceId-"+n).val(),vehicleId:$("#vehicleId-"+n).val(),pageNo:parseInt($("#pageNo-"+n).val()),take:parseInt($("#takeValue-"+n).val())},success:function(t){t.Offers.length>0&&(offerListing.API.offers=t.Offers,offerListing.API.renderOffers(),$("#pageNo-"+n).val(t.pageNo));var i=$("#offersContainer-"+n+" > div").length;i>=t.count||t.count==0?$("#loadmore-"+n).hide():$("#loadmore-"+n).show();$("#offersListingContainer").removeClass("loading")},error:function(){console.log("Json get failed");$("#offersListingContainer").removeClass("loading")}})},renderOffers:function(){for(var n=0;n<offerListing.API.offers.length;n++)offerListing.API.renderMarkup(offerListing.API.OfferTemplateId,offerListing.API.OffersContainerId,offerListing.API.offers[n])},renderMarkup:function(n,t,i){var r=document.getElementById(n).innerHTML,u=Mustache.to_html(r,i);$("#"+t).append(u)},loadmore:function(n){this.getOffersItems(n)}};$(document).ready(function(){$("#offerTemplate").length>0&&$(".component.offer-listing.tt-offer-listing-box").each(function(){var n=$(this).find(".row.row-eq-height.offersContainer").attr("id").replace("offersContainer-",""),t;offerListing.API.OffersContainerId="offersContainer-"+n;$(this).find("#loadmore-"+n).on("click",function(){offerListing.API.loadmore(n)});t=parseInt($("#offers-count-"+n).val());$("#"+offerListing.API.OffersContainerId+" .tt-offer-item").length>=t&&$("#loadmore-"+n).hide()})});